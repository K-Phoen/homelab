---
- name: Setup potato
  hosts: potato

  vars:
    docker_users: ["{{ homelab_user }}"]
    blocky_enabled: true
    blocky__arch: armv7
    keepalived_exporter__arch: armv7
    keepalived__vrrp_priority: 50

  roles:
    - common
    - k3s_node
    - alloy_node
    - exit_node
    - dns_server

- name: Setup carrot
  hosts: carrot

  vars:
    docker_users: ["{{ homelab_user }}"]
    blocky_enabled: true
    keepalived_exporter__arch: amd64
    keepalived__vrrp_priority: 100

  roles:
    - common
    - k3s_control_plane
    - alloy_node
    - exit_node
    - dns_server

- name: Setup bean
  hosts: bean

  vars:
    docker_users: ["{{ homelab_user }}"]
    blocky_enabled: true
    keepalived_exporter__arch: amd64
    keepalived__vrrp_priority: 150 # higher is better

  roles:
    - common
    - k3s_node
    - alloy_node
    - exit_node
    - dns_server
